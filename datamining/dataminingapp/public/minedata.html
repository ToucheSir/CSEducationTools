<html>
	<head>
		<link rel="stylesheet" type="text/css" href="css/bootstrap/css/bootstrap.css">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

		<!-- Script that does the data mining -->
		<script src="js/minedata.js"></script>

		<script type="text/javascript">

			classCount = 1; 

			function getData(){
				var code = $("#code").val(); 	

				if(code){
					loadData(code); 

					$("#classifier-wrapper").show();
					$("#data-wrapper").show();

					$("#bumper").css("height", "15%");
				}
			}

			function runClassifier(){

				var v1 = $("#val1").val(); 
				var v2 = $("#val2").val(); 
				var v3 = $("#val3").val(); 

				var result = null; 

				console.log(v1, v2, v3); 
				if(v1 && v2 && v3){
					result = mineData(v1, v2, v3); 
				}

				if(result){
					var max = Number.MIN_VALUE; 
					var maxIndex = -1; 	

					for(var i = 0; i < result[0].length; i++){

						if( result[0][i].total >= max ){

							maxIndex = i; 	
							max = result[0][i].total; 

						}
					}	

					if(maxIndex != -1){

						$("#classify-button-cell").hide(); 
						$("#result").val(result[0][maxIndex].name); 
						$("#result").show(); 
						$("#stats-button-wrapper").show(); 
					}
				}

			}

			function showStats(){

			}
		</script>

	</head>
	<body>
		<div class="container">
			<div class="row" id="bumper" style="height:35%;">
			</div>
			<div class='row' style="">
				<div class='col-sm-3'></div>
				<div class="center-block col-sm-6">
					<form id="input-form">
						<div class="input-group input-group-lg">
						  	<span class="input-group-addon" id="sizing-addon1">Code</span>
							<input type="text" class="form-control" placeholder="" aria-describedby="sizing-addon1" id="code">
							<span class="input-group-btn">
						        <button class="btn btn-success" onclick="getData();" type="button">Load Data</button>
						    </span>
						</div>
					</form>
				</div>
				<div class='col-sm-3'></div>
			</div>	
			<div class='row' id="classifier-wrapper" hidden>
				<div class='col-sm-2'></div>
				<div class='col-sm-8'>
					<h3> Classify A New Tuple</h3>
					<!--<form id="">-->
						<table class='table'>
							<tr>
							   	<th><h4 id="">Item 1</h4></th>
							   	<th><h4 id="">Item 2</h4></th>
							   	<th><h4 id="">Item 3</h4></th>
							   	<th><h4 id="result-title">Predicted</h4></th>
							</tr>
							<tbody id="input-table">
								<tr id="input-row-1">
									<td ><input id='val1' type='text' size='10'/></td>
									<td ><input id='val2' type='text'size='10'/></td>
									<td ><input id='val3' type='text'size='10'/></td>
									<td id="classify-button-cell"><button id="classify-button" class='btn btn-warning' onclick="runClassifier();">Classify</button></td>
									<td><input id='result' disabled value="" hidden size="12"/></td>
									<td id="stats-button-wrapper" hidden><button id="stats-button" class='btn' onclick="$('#stats-panel').show();">See Stats</button></td>
								</tr>
							</tbody>
						</table>
					<!--</form>-->
					
		
					<div hidden id='stats-panel' class="panel panel-default">
					  <div class="panel-body">
					    Basic panel example
					  </div>
					</div>
				</div>
				<div class='col-sm-2'></div>
			</div>

			<div class='row' id='data-wrapper' hidden>
				<div class='col-sm-2'></div>
				<div class='col-sm-8'>

					<h3>Data Set:</h3>

					<table class='table'>
						<tr>
						   	<th><h4 id="attr-1">Item 1</h4></th>
						   	<th><h4 id="attr-2">Item 2</h4></th>
						   	<th><h4 id="attr-3">Item 3</h4></th>
						   	<th><h4 id="class">Class</h4></th>
						</tr>
						<tbody id='data-table'></tbody> <!--this element gets populated by js/minedata.js -->
					</table>
				</div>
				<div class='col-sm-2'></div>
			</div>
		</div>
	</body>
</html>